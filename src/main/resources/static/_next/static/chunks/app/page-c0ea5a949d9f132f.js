(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{467:(e,t,o)=>{Promise.resolve().then(o.bind(o,2199))},2199:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>ec});var l=o(5155),r=o(2115),n=o(6525),a=o(9749),s=o(6529),i=o(6287),c=o(87),d=o(6838),p=o(1839),m=o(6991),u=o(6433),h=o(8722),f=o(8079),g=o(7805),x=o(2608),y=o(5020);function b(e){let t,o,r,n,b,j=(0,a.c)(12);j[0]!==e.selectMode?(t=e.selectMode?[{icon:(0,l.jsx)(h.A,{}),name:"SelectAll",label:"Select All"},{icon:(0,l.jsx)(f.A,{}),name:"UnselectAll",label:"Unselect All"},{icon:(0,l.jsx)(p.A,{}),name:"Download",label:"Download"},{icon:(0,l.jsx)(m.A,{}),name:"Delete",label:"Delete"},{icon:(0,l.jsx)(g.A,{}),name:"Close",label:"Close Select Mode"}]:[{icon:(0,l.jsx)(u.A,{}),name:"Select",label:"Select"},{icon:(0,l.jsx)(c.A,{}),name:"CreateFolder",label:"Create Folder"},{icon:(0,l.jsx)(x.A,{}),name:"DeleteFolder",label:"Delete Empty Folder"},{icon:(0,l.jsx)(d.A,{}),name:"Upload",label:"Upload"}],j[0]=e.selectMode,j[1]=t):t=j[1];let A=t;j[2]===Symbol.for("react.memo_cache_sentinel")?(o={position:"fixed",bottom:"15%",right:"8%"},r=(0,l.jsx)(s.A,{}),j[2]=o,j[3]=r):(o=j[2],r=j[3]);let k=e.handleClose,S=e.handleOpen,w=e.speedDialOpen;return j[4]!==A||j[5]!==e?(n=A.map(t=>(0,l.jsx)(i.A,{icon:t.icon,slotProps:{tooltip:{title:t.label}},onClick:async()=>{"Select"===t.name&&e.handleSelectModeToggle(),"CreateFolder"===t.name&&e.handleCreateFolderOpen(),"Upload"===t.name&&e.handleUploadClick(),"SelectAll"===t.name&&e.selectAll(),"UnselectAll"===t.name&&e.unselectAll(),"Download"===t.name&&await e.downloadSelected(),"Close"===t.name&&e.closeSelectMode(),"Delete"===t.name&&e.deleteSelected(),"DeleteFolder"===t.name&&e.deleteFolder(C)}},t.name)),j[4]=A,j[5]=e,j[6]=n):n=j[6],j[7]!==e.handleClose||j[8]!==e.handleOpen||j[9]!==e.speedDialOpen||j[10]!==n?(b=(0,l.jsx)(y.A,{ariaLabel:"SpeedDial controlled open example",sx:o,icon:r,onClose:k,onOpen:S,open:w,children:n}),j[7]=e.handleClose,j[8]=e.handleOpen,j[9]=e.speedDialOpen,j[10]=n,j[11]=b):b=j[11],b}function C(e){return!e}var j=o(3614),A=o(1660),k=o(2667),S=o(2707);let w=async e=>{if(0!==e.size)for(let t of Array.from(e))try{let e=await fetch(t);if(!e.ok)throw Error("Network response was not ok");let o=await e.blob(),l=URL.createObjectURL(o),r=document.createElement("a");r.href=l;let n=t.split("/");r.download=n[n.length-1].split("?")[0]||"image.jpg",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(l)}catch(e){console.error("Failed to download",t,e)}},F=async(e,t,o,l,r,n,a,s)=>{let i;if("folder"!==e&&0===e.size)return void a(!1);if(o(!0),"folder"===e)i={folder:s};else for(let t of(i=[],Array.from(e))){let e=t.split("/").pop();i.push(e)}try{if((await fetch(`/photos${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)return console.log("File/s deleted successfully"),o(!1),l(e=>e+1),r("File/s deleted successfully"),!0;return n("folder"===e?"Failed to delete folder, please ensure the folder is empty.":"Failed to delete images/files."),o(!1),l(e=>e+1),!1}catch(e){console.error("Error deleting images:",e),n("Error deleting images"),o(!1),l(e=>e+1)}},v=async(e,t,o,l,r)=>{o(!0);try{let n=await fetch(`/photos${t}\\${e}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(200===n.status){let t={name:e,date:new Date().toISOString().split("T")[0]};return l(`${e} Folder created successfully.`),o(!1),t}return console.error("Failed to create folder"),r("Failed to create folder"),o(!1),null}catch(e){return console.error("Error creating folder:",e),r(e.message),o(!1),null}},_=async(e,t,o,l,r)=>{if(!e||0===e.length)return!1;let n=new FormData;for(let t=0;t<e.length;t++)n.append("files",e[t]);try{let e=await S.A.put(`/photos${t}`,n,{onUploadProgress:e=>{let t=Math.round(100*e.loaded/e.total);o(t)}});return l("Files uploaded successfully."),200===e.status}catch(e){return console.error("Upload error:",e),r("Upload error"),!1}},D=async(e,t,o,l)=>{try{t(!0);let o=`/photos${e}`,r=await fetch(o);if(!r.ok)return console.error("Failed to fetch entries from",o),t(!1),l("Request failed! some shit ain't working right."),{folders:[],images:[]};let n=await r.json(),a=[],s=[];return Array.isArray(n)?n.forEach(t=>{let o="string"==typeof t.file?t.file:"",l=o.replace(/^\//,"");if("D"===t.type)a.push({name:l,date:t.date||null});else{let t=(l.split(".").pop()||"").toLowerCase(),r=["jpg","jpeg","png","webp","gif","bmp","svg"].includes(t),n=["mp4","webm","ogg","mov","avi","mkv","flv","wmv","m4v"].includes(t),a=`/images${e}/${o}`,i=`/scaleImage${e}/${o}?width=500&height=500`;s.push({img:a,title:l,url:i,type:r?"img":n?"vid":"unknown"})}}):(console.error("Unexpected API response format:",n),t(!1)),t(!1),{folders:a,images:s}}catch(e){return console.error("Error fetching folder and image data:",e),t(!1),l("Uhhhhh......some shit ain't working right."),{folders:[],images:[]}}};var U=o(4068),O=o(8184);function z(e){let t,o,r,n=(0,a.c)(8),{open:s,onClose:i,message:c}=e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t={vertical:"top",horizontal:"center"},n[0]=t):t=n[0],n[1]!==c||n[2]!==i?(o=(0,l.jsx)(O.A,{onClose:i,severity:"error",variant:"filled",children:c}),n[1]=c,n[2]=i,n[3]=o):o=n[3],n[4]!==i||n[5]!==s||n[6]!==o?(r=(0,l.jsx)(U.A,{open:s,autoHideDuration:4e3,onClose:i,anchorOrigin:t,children:o}),n[4]=i,n[5]=s,n[6]=o,n[7]=r):r=n[7],r}var I=o(3718),E=o(5352),N=o(5636),$=o(440);function P(e){let t,o,r=(0,a.c)(15),{itemData:s,selectMode:i,selected:c,toggleSelect:d,theme:p,handleFullscreenImage:m}=e;if(r[0]!==m||r[1]!==s||r[2]!==i||r[3]!==c||r[4]!==p||r[5]!==d){let e;r[7]!==m||r[8]!==i||r[9]!==c||r[10]!==p||r[11]!==d?(e=e=>(0,l.jsxs)(I.A,{sx:{position:"relative",cursor:i?"pointer":"default"},onClick:()=>{i&&d(e.img)},children:[i&&(0,l.jsx)(E.A,{size:"small",checked:c.has(e.img),onChange:()=>d(e.img),inputProps:{"aria-label":`Select ${e.title}`},sx:{position:"absolute",top:8,right:8,zIndex:2,bgcolor:"rgba(255,255,255,0.75)",borderRadius:"50%"},onClick:R}),(0,l.jsxs)(n.A,{onClick:()=>{i||m(e.img)},sx:{width:"100%",aspectRatio:"1 / 1",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:["img"===e.type&&(0,l.jsx)("img",{src:e.url,alt:e.title,sizes:"(max-width: 10px) 100vw, 10px",loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover"}}),"vid"===e.type&&(0,l.jsx)("video",{src:e.img,alt:e.title,controls:!0,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover"}}),"unknown"===e.type&&(0,l.jsxs)(n.A,{sx:{width:"100%",aspectRatio:"1 / 1",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundColor:"dark"===p.palette.mode?p.palette.grey[900]:p.palette.grey[100],cursor:"pointer",flexDirection:"column","&:hover":{backgroundColor:"dark"===p.palette.mode?p.palette.grey[800]:p.palette.grey[200]}},children:[(0,l.jsx)(N.A,{sx:{fontSize:100,color:p.palette.secondary.main,marginBottom:1}}),(0,l.jsx)($.A,{variant:"body2",sx:{fontSize:7,fontWeight:500,marginBottom:.5,color:p.palette.text.primary},children:e.title})]})]})]},e.title),r[7]=m,r[8]=i,r[9]=c,r[10]=p,r[11]=d,r[12]=e):e=r[12],t=s.map(e),r[0]=m,r[1]=s,r[2]=i,r[3]=c,r[4]=p,r[5]=d,r[6]=t}else t=r[6];return r[13]!==t?(o=(0,l.jsx)(l.Fragment,{children:t}),r[13]=t,r[14]=o):o=r[14],o}function R(e){return e.stopPropagation()}var M=o(4571),W=o(8832);function L(e){let t,o,r,s=(0,a.c)(20),{folders:i,handleFolderClick:c,theme:d,pathname:p,handleParentFolderClick:m,handleDeleteFolder:u,enableDeleteFolder:h}=e,f=h?140:170;if(s[0]!==m||s[1]!==p||s[2]!==d?(t="/"!==p&&(0,l.jsx)(I.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsxs)(n.A,{onClick:()=>m(),sx:{borderRadius:2,width:"100%",aspectRatio:"1 / 1",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundColor:"dark"===d.palette.mode?d.palette.grey[900]:d.palette.grey[100],cursor:"pointer",flexDirection:"column","&:hover":{backgroundColor:"dark"===d.palette.mode?d.palette.grey[800]:d.palette.grey[200]}},children:[(0,l.jsx)(M.A,{sx:{fontSize:170,color:d.palette.primary.main,marginBottom:1}}),(0,l.jsx)($.A,{variant:"body2",sx:{position:"absolute",fontSize:15,fontWeight:500,marginBottom:.5,color:d.palette.text.primary},children:"Parent Folder"})]})},"parent-folder"),s[0]=m,s[1]=p,s[2]=d,s[3]=t):t=s[3],s[4]!==h||s[5]!==f||s[6]!==i||s[7]!==u||s[8]!==c||s[9]!==d){let e;s[11]!==h||s[12]!==f||s[13]!==u||s[14]!==c||s[15]!==d?(e=e=>(0,l.jsx)(I.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsxs)(n.A,{onClick:()=>c(e.name),sx:{borderRadius:2,width:"100%",aspectRatio:"1 / 1",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexDirection:"column",backgroundColor:"dark"===d.palette.mode?d.palette.grey[800]:d.palette.grey[200],cursor:"pointer","&:hover":{backgroundColor:"dark"===d.palette.mode?d.palette.grey[800]:d.palette.grey[200]}},children:["   ",h&&(0,l.jsx)(W.A,{sx:{fontSize:35,color:"red",position:"absolute",top:"5%",right:"5%"},onClick:()=>u(e.name)}),(0,l.jsx)(M.A,{sx:{fontSize:f,color:d.palette.primary.main,marginBottom:1}}),(0,l.jsx)($.A,{variant:"body2",sx:{position:"absolute",fontSize:15,fontWeight:500,marginBottom:.5,color:d.palette.text.primary},children:e.name})]})},e.name),s[11]=h,s[12]=f,s[13]=u,s[14]=c,s[15]=d,s[16]=e):e=s[16],o=i.map(e),s[4]=h,s[5]=f,s[6]=i,s[7]=u,s[8]=c,s[9]=d,s[10]=o}else o=s[10];return s[17]!==t||s[18]!==o?(r=(0,l.jsxs)(l.Fragment,{children:[t,o]}),s[17]=t,s[18]=o,s[19]=r):r=s[19],r}var Q=o(9754),T=o(3098);function B(e){let t,o,r,s,i,c,d,p,m=(0,a.c)(14),{open:u,progress:h}=e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(t={color:"#fff",zIndex:H,backdropFilter:"blur(3px)"},m[0]=t):t=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(o={width:"60%",maxWidth:500,background:"rgba(0,0,0,0.6)",padding:3,borderRadius:2},m[1]=o):o=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)($.A,{variant:"h6",sx:{mb:1,textAlign:"center",color:"#fff"},children:"Uploading..."}),m[2]=r):r=m[2],m[3]!==h?(s=(0,l.jsx)(Q.A,{variant:"determinate",value:h}),m[3]=h,m[4]=s):s=m[4],m[5]===Symbol.for("react.memo_cache_sentinel")?(i={mt:1,textAlign:"center",color:"#fff"},m[5]=i):i=m[5],m[6]!==h?(c=(0,l.jsxs)($.A,{sx:i,children:[h,"%"]}),m[6]=h,m[7]=c):c=m[7],m[8]!==s||m[9]!==c?(d=(0,l.jsxs)(n.A,{sx:o,children:[r,s,c]}),m[8]=s,m[9]=c,m[10]=d):d=m[10],m[11]!==u||m[12]!==d?(p=(0,l.jsx)(T.A,{open:u,sx:t,children:d}),m[11]=u,m[12]=d,m[13]=p):p=m[13],p}function H(e){return e.zIndex.modal+1}var K=o(1711);function q(e){let t,o,r,s,i,c,d=(0,a.c)(9),{open:p,text:m}=e,u=void 0===m?"Loading...":m;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={color:"#fff",zIndex:G,backdropFilter:"blur(6px)",backgroundColor:"rgba(0,0,0,0.35)"},d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",flexDirection:"column",alignItems:"center",padding:4,width:260,borderRadius:3,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 4px 30px rgba(0,0,0,0.3)",backdropFilter:"blur(12px)",animation:"fadeIn 0.4s ease-out","@keyframes fadeIn":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}},r=(0,l.jsx)(K.A,{thickness:5,size:50}),d[1]=o,d[2]=r):(o=d[1],r=d[2]),d[3]===Symbol.for("react.memo_cache_sentinel")?(s={marginTop:2,fontWeight:500,letterSpacing:.5},d[3]=s):s=d[3],d[4]!==u?(i=(0,l.jsxs)(n.A,{sx:o,children:[r,(0,l.jsx)($.A,{variant:"body1",sx:s,children:u})]}),d[4]=u,d[5]=i):i=d[5],d[6]!==p||d[7]!==i?(c=(0,l.jsx)(T.A,{open:p,sx:t,children:i}),d[6]=p,d[7]=i,d[8]=c):c=d[8],c}function G(e){return e.zIndex.modal+10}function J(e){let t,o,r,n=(0,a.c)(8),{open:s,onClose:i,message:c}=e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t={vertical:"top",horizontal:"center"},n[0]=t):t=n[0],n[1]!==c||n[2]!==i?(o=(0,l.jsx)(O.A,{onClose:i,severity:"success",variant:"filled",children:c}),n[1]=c,n[2]=i,n[3]=o):o=n[3],n[4]!==i||n[5]!==s||n[6]!==o?(r=(0,l.jsx)(U.A,{open:s,autoHideDuration:3e3,onClose:i,anchorOrigin:t,children:o}),n[4]=i,n[5]=s,n[6]=o,n[7]=r):r=n[7],r}var Y=o(6478);function V(e){let t,o,r,s,i,c,d,p,m,u=(0,a.c)(16),{open:h,onClose:f,src:x}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={color:"#fff",zIndex:Z,backdropFilter:"blur(6px)",backgroundColor:"rgba(0,0,0,0.35)"},u[0]=t):t=u[0],u[1]===Symbol.for("react.memo_cache_sentinel")?(o={position:"relative",width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",animation:"fadeIn 0.4s ease-out","@keyframes fadeIn":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}},u[1]=o):o=u[1],u[2]===Symbol.for("react.memo_cache_sentinel")?(r={position:"absolute",top:20,right:20,backgroundColor:"rgba(0,0,0,0.5)",color:"#fff","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},s=(0,l.jsx)(g.A,{}),u[2]=r,u[3]=s):(r=u[2],s=u[3]),u[4]!==f?(i=(0,l.jsx)(Y.A,{onClick:f,sx:r,children:s}),u[4]=f,u[5]=i):i=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(c={maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},u[6]=c):c=u[6],u[7]!==x?(d=(0,l.jsx)("img",{src:x,style:c}),u[7]=x,u[8]=d):d=u[8],u[9]!==i||u[10]!==d?(p=(0,l.jsxs)(n.A,{onClick:X,sx:o,children:[i,d]}),u[9]=i,u[10]=d,u[11]=p):p=u[11],u[12]!==f||u[13]!==h||u[14]!==p?(m=(0,l.jsx)(T.A,{open:h,onClick:f,sx:t,children:p}),u[12]=f,u[13]=h,u[14]=p,u[15]=m):m=u[15],m}function X(e){return e.stopPropagation()}function Z(e){return e.zIndex.modal+10}var ee=o(905),et=o(2292),eo=o(4784),el=o(5622),er=o(989);function en(e){let t,o,r,n,s,i,c,d,p,m=(0,a.c)(25);m[0]===Symbol.for("react.memo_cache_sentinel")?(t={pt:2},m[0]=t):t=m[0],m[1]!==e?(o=t=>e.setFolderName(t.target.value),r=t=>{"Enter"===t.key&&e.handleCreateFolder()},m[1]=e,m[2]=o,m[3]=r):(o=m[2],r=m[3]),m[4]!==e.folderName||m[5]!==o||m[6]!==r?(n=(0,l.jsx)(et.A,{sx:t,children:(0,l.jsx)(el.A,{autoFocus:!0,fullWidth:!0,label:"Folder Name",value:e.folderName,onChange:o,onKeyPress:r,placeholder:"Enter folder name"})}),m[4]=e.folderName,m[5]=o,m[6]=r,m[7]=n):n=m[7],m[8]!==e.handleCreateFolderClose?(s=(0,l.jsx)(er.A,{onClick:e.handleCreateFolderClose,children:"Cancel"}),m[8]=e.handleCreateFolderClose,m[9]=s):s=m[9],m[10]!==e.folderName||m[11]!==e.isCreatingFolder?(i=!e.folderName.trim()||e.isCreatingFolder||e.folderName.includes("/")||e.folderName.includes(" ")||e.folderName.includes("\\"),m[10]=e.folderName,m[11]=e.isCreatingFolder,m[12]=i):i=m[12];let u=e.isCreatingFolder?"Creating...":"OK";return m[13]!==e.handleCreateFolder||m[14]!==i||m[15]!==u?(c=(0,l.jsx)(er.A,{onClick:e.handleCreateFolder,variant:"contained",disabled:i,children:u}),m[13]=e.handleCreateFolder,m[14]=i,m[15]=u,m[16]=c):c=m[16],m[17]!==s||m[18]!==c?(d=(0,l.jsxs)(eo.A,{children:[s,c]}),m[17]=s,m[18]=c,m[19]=d):d=m[19],m[20]!==e.createFolderOpen||m[21]!==e.handleCreateFolderClose||m[22]!==n||m[23]!==d?(p=(0,l.jsxs)(ee.A,{open:e.createFolderOpen,onClose:e.handleCreateFolderClose,maxWidth:"sm",fullWidth:!0,children:[n,d]}),m[20]=e.createFolderOpen,m[21]=e.handleCreateFolderClose,m[22]=n,m[23]=d,m[24]=p):p=m[24],p}function ea(e){let t,o,r,n,s=(0,a.c)(7),i=e.popUpQuestion;return s[0]!==e.setPopUpQuestion?(t=e.setPopUpQuestion(!1),s[0]=e.setPopUpQuestion,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(et.A,{sx:{pt:2},children:(0,l.jsx)($.A,{children:" Are you sure you delete the Files or Folder? "})}),s[2]=o):o=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsxs)(eo.A,{children:[(0,l.jsx)(er.A,{onClick:ei,children:"No"}),(0,l.jsx)(er.A,{onClick:es,variant:"contained",children:"Yes"})]}),s[3]=r):r=s[3],s[4]!==e.popUpQuestion||s[5]!==t?(n=(0,l.jsxs)(ee.A,{open:i,onClose:t,maxWidth:"sm",fullWidth:!0,children:[o,r]}),s[4]=e.popUpQuestion,s[5]=t,s[6]=n):n=s[6],n}function es(){return!0}function ei(){return!1}function ec(){let e,t,o,s,i,c,d,p,m,u,h=(0,A.A)(),[f,g]=r.useState("/"),x=(i=(0,a.c)(8),c=(0,A.A)(),i[0]!==c.breakpoints?(e=c.breakpoints.down("sm"),i[0]=c.breakpoints,i[1]=e):e=i[1],d=(0,k.A)(e),i[2]!==c.breakpoints?(t=c.breakpoints.between("sm","md"),i[2]=c.breakpoints,i[3]=t):t=i[3],p=(0,k.A)(t),i[4]!==c.breakpoints?(o=c.breakpoints.between("md","lg"),i[4]=c.breakpoints,i[5]=o):o=i[5],m=(0,k.A)(o),i[6]!==c.breakpoints?(s=c.breakpoints.up("lg"),i[6]=c.breakpoints,i[7]=s):s=i[7],u=(0,k.A)(s),d?2:p?3:m?5:u?7:3),[y,C]=r.useState(!1),[S,U]=r.useState([]),[O,I]=r.useState([]),[E,N]=r.useState(!0),[$,R]=r.useState(0),[M,W]=r.useState(!1),[Q,T]=r.useState(!1),[H,K]=r.useState(null),[G,Y]=r.useState(!1),[X,Z]=r.useState(""),[ee,et]=r.useState(!1),[eo,el]=r.useState(!1),[er,es]=r.useState(!1),[ei,ec]=r.useState(""),ed=e=>{es(!0),ec(e)},[ep,em]=r.useState(!1),[eu,eh]=r.useState(""),ef=e=>{em(!0),eh(e)},eg=async()=>{if(X.trim()){et(!0);try{let e=await v(X,f,N,ef,ed);e?(S.push(e),Z(""),Y(!1),eS(new Set(ek))):console.error("Failed to create folder")}catch(e){console.error("Error creating folder:",e)}finally{et(!1)}}},ex=r.useRef(null),[ey,eb]=r.useState(!1),[eC,ej]=r.useState(0),eA=async e=>{let t=e.target.files;if(t&&0!==t.length){eb(!0);try{await _(t,f,ej,ef,ed)?(console.log("Files uploaded successfully"),ex.current&&(ex.current.value="")):console.error("Failed to upload files")}catch(e){console.error("Error uploading files:",e)}finally{eb(!1)}}},[ek,eS]=r.useState(new Set);r.useEffect(()=>{(async()=>{try{let{folders:e,images:t}=await D(f,N,ef,ed);U(e),I(t),eS(new Set),W(!1)}catch(e){console.error("Error fetching data:",e),U([]),I([]),eS(new Set),W(!1),el(!1)}})()},[f,ey,$]);let[ew,eF]=r.useState(!1);return(0,l.jsxs)(n.A,{sx:{width:"100%",height:"100vh",flexGrow:1},children:[(0,l.jsx)(B,{open:ey,progress:eC}),(0,l.jsx)(q,{open:E}),(0,l.jsx)(V,{open:Q,src:H,onClose:()=>{T(!1),K(null)}}),(0,l.jsx)(z,{open:er,onClose:()=>es(!1),message:ei}),(0,l.jsx)(J,{open:ep,onClose:()=>em(!1),message:eu}),(0,l.jsxs)(j.A,{cols:x,children:[(0,l.jsx)(L,{folders:S,handleFolderClick:e=>{eo||g(t=>"/"===t?`/${e}`:`${t}/${e}`)},theme:h,pathname:f,handleParentFolderClick:()=>{g(e=>{e.split("/");let t="/"===e?[]:e.split("/").filter(e=>e);return t.pop(),0===t.length?"/":`/${t.join("/")}`})},handleDeleteFolder:e=>{window.confirm(`Are you sure you want to delete the folder "${e}" ?`)&&F("folder",f,N,R,ef,ed,W,e)},enableDeleteFolder:eo}),(0,l.jsx)(P,{itemData:O,selectMode:M,selected:ek,toggleSelect:e=>{let t=new Set(ek);t.has(e)?t.delete(e):t.add(e),eS(t)},theme:h,handleFullscreenImage:e=>{K(e),T(!0),el(!1)}})]}),(0,l.jsx)(b,{selectMode:M,handleClose:()=>C(!1),handleOpen:()=>C(!0),speedDialOpen:y,handleSelectModeToggle:()=>{W(!M)},handleCreateFolderOpen:()=>{Y(!0),Z("")},handleUploadClick:()=>{ex.current?.click()},selectAll:()=>{eS(new Set(O.map(e=>e.img)))},unselectAll:()=>{eS(new Set)},downloadSelected:()=>{w(ek)},closeSelectMode:()=>{W(!1)},deleteSelected:()=>{window.confirm(`Are you sure you want to delete ${ek.size} item/s?`)&&F(ek,f,N,R,ef,ed,W,null)},deleteFolder:el}),(0,l.jsx)(en,{createFolderOpen:G,handleCreateFolderClose:()=>{Y(!1),Z("")},folderName:X,setFolderName:Z,handleCreateFolder:eg,isCreatingFolder:ee}),(0,l.jsx)(ea,{popUpQuestion:ew,setPopUpQuestion:eF}),(0,l.jsx)("input",{ref:ex,type:"file",multiple:!0,onChange:eA,style:{display:"none"}})]})}}},e=>{e.O(0,[240,441,826,358],()=>e(e.s=467)),_N_E=e.O()}]);